% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/handlers.R
\name{setup_emoji_handler}
\alias{setup_emoji_handler}
\title{Setup Emoji Shower Message Handler}
\usage{
setup_emoji_handler()
}
\value{
A Shiny script tag (\verb{<script>} element) that sets up the custom message
handler for the "triggerEmojiShower" Shiny event. The handler registers
a listener that calls the client-side shower animation function.
}
\description{
Enables manual triggering of emoji shower animations from server-side code.
This function is required when using \code{\link[=emoji_shower_ui]{emoji_shower_ui()}} with \code{trigger = NULL},
allowing you to control when showers appear via user interactions or server events.
}
\details{
\subsection{How It Works}{

This function injects JavaScript that registers a custom Shiny message handler.
When your server code sends the "triggerEmojiShower" message, the handler
captures it and executes the shower animation that was set up by \code{\link[=emoji_shower_ui]{emoji_shower_ui()}}.
}

\subsection{Usage Pattern}{

Include this in your UI:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{setup_emoji_handler()
emoji_shower_ui(trigger = NULL)  # Important: set trigger = NULL
}\if{html}{\out{</div>}}

Then in your server, trigger the shower with:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{session$sendCustomMessage("triggerEmojiShower", list())
}\if{html}{\out{</div>}}

Or use the convenience function \code{\link[=emit_shower]{emit_shower()}} instead:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{emit_shower(session)
}\if{html}{\out{</div>}}
}

\subsection{Important Notes}{
\itemize{
\item Must be used in the same Shiny app as \code{\link[=emoji_shower_ui]{emoji_shower_ui()}} with \code{trigger = NULL}
\item Requires jQuery and Shiny's message handler infrastructure (automatically available)
\item The shower animation uses the same configuration as set in \code{\link[=emoji_shower_ui]{emoji_shower_ui()}}
\item Multiple showers can be triggered in sequence or with the same trigger event
}
}
}
\examples{
\dontrun{
ui <- fluidPage(
  setup_emoji_handler(),
  emoji_shower_ui(trigger = NULL),
  actionButton("celebrate", "Celebrate!")
)

server <- function(input, output, session) {
  observeEvent(input$celebrate, {
    session$sendCustomMessage("triggerEmojiShower", list())
  })
}
}

}
